FROM msteve/emobility
MAINTAINER msbeiti

#ENV DEBIAN_FRONTEND noninteractive

# Create directories, setup user, groups and configs
RUN addgroup --gid 2000 tpot
RUN adduser --system --no-create-home --shell /bin/bash --uid 2000 --disabled-password --disabled-login --gid 2000 tpot
RUN mkdir -p /data/eMobility/ /data/eMobility/conf /data/eMobility/log
COPY configs/* /data/eMobility/conf/
RUN chmod 760 -R /data/ && chown tpot:tpot -R /data/
ADD supervisord.conf /etc/supervisor/conf.d/supervisord.conf

# Clean up
RUN apt-get clean && rm -rf /var/lib/apt/lists/* /tmp/* /var/tmp/*

# Set workdir and start conpot
#WORKDIR /data/eMobility/
EXPOSE 8080
CMD ["/usr/bin/supervisord"]


